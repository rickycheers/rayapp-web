var _=require("/lib/underscore"),ui=require("/ui/components"),theme=require("/ui/theme");function tabWidth(){return Ti.Platform.displayCaps.platformWidth/3}
function TabButton(g,c,e,h,f){var a=new ui.Component(Ti.UI.createView({layout:"vertical",width:tabWidth(),opacity:0.8,backgroundColor:f?"#eaeaea":"transparent"}));a.id=g;a.index=h;var e=(a.selected=f)?e.replace(".png","_active.png"):e,b=new ui.Component(new ui.ImageView(e,{top:"5dip",height:"30dip"}));a.add(b);a.add(new ui.Label(c,{text:c,color:"#033269",font:{fontSize:"10dip",fontStyle:"italic",fontWeight:"bold"}}));a.toggle=function(i){var c="",d="",d=b.get("image");a.index===i?(c="#eaeaea",d=d.replace("_active",
""),d=d.replace(".png","_active.png")):(c="transparent",d=d.replace("_active",""));a.set("backgroundColor",c);b.set("image",d)};a.toggleIcon=function(){var a=b.get("image"),a=a.match("_active")?a.replace("_active",""):a.replace(".png","_active.png");b.set("image",a)};return a}
function TabStripView(g){var c=new ui.Component(Ti.UI.createView(_.extend({height:"50dip",layout:"horizontal",backgroundImage:"/images/menu-background.jpg"},g.viewArgs||{}))),e=[],h=!0,f=0,a;for(a in g.tabs){var b=g.tabs[a],b=new TabButton(a,b.title,b.icon,f,h);c.add(b);e.push(b);h=!1;(function(a,b){b.addEventListener("click",function(){c.fireEvent("selected",{index:a})})})(f,b);f++}c.selectIndex=function(a){_.each(e,function(b){b.toggle(a)})};return c}module.exports=TabStripView;